<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>大阪城　歴史クイズ</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107108000-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments) };
        gtag('js', new Date());

        gtag('config', 'UA-107108000-1');

    </script>

</head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<body background="Topbg.jpg">
<style>
    /* ウィンドウ幅が480px以上の場合に適用するCSS */

    @media screen and ( min-width:480px) {
        p {
            color: #00f;
            /* 青色 */
        }
    }

    /* ウィンドウ幅が0〜479pxの場合に適用するCSS */

    @media screen and ( max-width:479px) {
        p {
            color: #f00;
            /* 赤色 */
        }
    }
</style>

<body>
    <div class="container">
        <div align="center">
            <h1>
                <span id="myIndex">1</span>問目（全
                <span id="myTotal">5</span>問）
                <br>
                <br>
                <div id="myQuestion">大阪城を建てた人は誰？</div>
                <input name="myRadio" type="radio" id="myRadio0">
                <span name="myCase">大工さん</span>
                <br>
                <input name="myRadio" type="radio" id="myRadio1">
                <span name="myCase">藤堂高虎</span>
                <br>
                <input name="myRadio" type="radio" id="myRadio2">
                <span name="myCase">徳川秀忠</span>
                <br>
                <input name="myRadio" type="radio" id="myRadio3">
                <span name="myCase">豊臣秀吉</span>
                <br>
            </h1>
            <script type="text/javascript">
                var qdata = [

                    { q: "真田丸の戦いが行われたのはいつ？", a: ["12月4日", "12月3日", "12月1日", "12月8日"] },
                    { q: "大阪城の面積は何k㎡？(本丸の東にある、大坂城公園を含む)", a: ["1.62k㎡", "1.76k㎡", "1.94k㎡", "1.11k㎡"] },
                    { q: "豊臣家が建てた「大坂城」の「天守」は「地上6階地下2階」だったが、大坂の陣で焼け落ちたあと徳川家が建てた「大坂城」の「天守」は何階建て？", a: ["地上5階地下1階", "地上6階地下なし", "地上6階地下3階", "地上5階地下2階"] },
                    { q: "大阪城天守閣は何年に有形文化財に登録された？", a: ["昭和6年(1931年)", "昭和5年(1930年)", "昭和47年(1972年)", "昭和31年(1956年)"] },
                    { q: "大阪城の堀の深さは何ｍ？", a: ["5.2ｍ", "6.1ｍ", "7.1ｍ", "4.6ｍ"] }
                ];

                var qsel;
                var qidx;
                var corr;


                window.onload = init;



                function init() {
                    for (var i = 0; i < qdata.length; i++) {
                        qdata[i].stat = 0;

                    }


                    document.getElementById("myTotal").innerHTML = qdata.length;


                    var rb = document.getElementsByName("myRadio");
                    for (i = 0; i < rb.length; i++) {
                        rb[i].id = ("myRadio" + i);
                        rb[i].onclick = judgeSelect;
                    }


                    qidx = 0;

                    corr = 0;

                    myChoice();
                    myQuest();
                }



                function myChoice() {

                    if (qidx >= qdata.length) {
                        qsel = -1;
                    }


                    qsel = Math.floor(Math.random() * qdata.length);

                    while (qdata[qsel].stat > 0) {
                        qsel++;
                        if (qsel >= qdata.length) {
                            qsel = 0;
                        }
                    }
                }



                function myQuest() {

                    var rb = document.getElementsByName("myRadio");
                    for (var i = 0; i < rb.length; i++) {
                        rb[i].checked = false;
                    }


                    document.getElementById("myIndex").innerHTML = (qidx + 1);
                    document.getElementById("myQuestion").innerHTML = qdata[qsel].q;

                    var ac = Object.create(qdata[qsel].a);
                    for (i = 0; i < 4; i++) {
                        var rd1 = Math.floor(Math.random() * qdata[qsel].a.length);
                        var rd2 = Math.floor(Math.random() * qdata[qsel].a.length);
                        var t = ac[rd1];
                        ac[rd1] = ac[rd2];
                        ac[rd2] = t;
                    }


                    var cs = document.getElementsByName("myCase");
                    for (i = 0; i < cs.length; i++) {
                        cs[i].innerHTML = ac[i];
                    }


                    qdata[qsel].stat = 1;
                }



                function judgeSelect() {


                    var idArr = this.id.split("myRadio");
                    var id = idArr[1];


                    var cs = document.getElementsByName("myCase");
                    if (cs[id].innerHTML == qdata[qsel].a[0]) {
                        alert("正解です！");
                        corr++;
                    }
                    else {
                        alert("間違っています！");
                    }


                    qidx++;


                    if (qidx >= qdata.length) {
                        alert("終了です！全" + qdata.length + "問のうち、" + corr + "問が正解でした！");



                        alert("（次に進む）");

                        init();
                    }
                    else {

                        myChoice();
                        myQuest();
                    }
                }
            </script>
            <h1>
                <p>
                    <input type="button" onclick="location.href='./top.html'"value="HOME" class="btn btn-info btn-lg">
                </p>
            </h1>
        </div>
    </div>

</body>

</html>
